import java.io.BufferedReader;
import java.io.InputStreamReader;

import org.jsoup.Jsoup;
import org.jsoup.nodes.*;
import org.jsoup.select.Elements;
public class Project02_B_crawlingbible {

	public static void main(String[] args) {
		String url = "https://sum.su.or.kr:8888/bible/today/Ajax/Bible/BodyMatter?qt_ty=QT1";
		BufferedReader br= new BufferedReader(new InputStreamReader(System.in));
		try {
			System.out.print("[입력->년(yyyy)-월(mm)-일(dd)] : ");
			String bible = br.readLine();
			url = url+"&Base_de="+bible+"&bibleType=1";
			System.out.println("============================");
			Document doc = Jsoup.connect(url).post();
			
			Element bible_text = doc.select(".bible_text").first();
			System.out.println(bible_text.text());
			
			Element bibleinfo_box = doc.select(".bibleinfo_box").first();
			System.out.println(bibleinfo_box.text());
			
			Elements liList = doc.select(".body_list > li");
			for (Element li : liList) {
				System.out.print(li.select(".num").first().text()+":");
				System.out.println(li.select(".info").first().text());
			}
			
			/* //리소스 다운로드 (mp3, image)
			Element tag = doc.select("source").first();
			String dPath = tag.attr("src").trim();
			System.out.println(dPath); // https://meditation.su.or.kr/meditation_mp3/2020/20200903.mp3
			String fileName=dPath.substring(dPath.lastIndexOf("/")+1);  */
			
			Element tag = doc.select(".img > img").first();
			String dPath = "https://sum.su.or.kr:8888"+tag.attr("src").trim();
			System.out.println(dPath); 
			String fileName=dPath.substring(dPath.lastIndexOf("/")+1);
			
			
			
			
		} catch (Exception e) {
			e.printStackTrace();
		}
			
	}

}
